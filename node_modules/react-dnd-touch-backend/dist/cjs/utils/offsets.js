"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getEventClientOffset = exports.getEventClientTouchOffset = exports.getNodeClientOffset = void 0;
const predicates_1 = require("./predicates");
const ELEMENT_NODE = 1;
function getNodeClientOffset(node) {
    const el = node.nodeType === ELEMENT_NODE ? node : node.parentElement;
    if (!el) {
        return undefined;
    }
    const { top, left } = el.getBoundingClientRect();
    return { x: left, y: top };
}
exports.getNodeClientOffset = getNodeClientOffset;
function getEventClientTouchOffset(e, lastTargetTouchFallback) {
    if (e.targetTouches.length === 1) {
        return getEventClientOffset(e.targetTouches[0]);
    }
    else if (lastTargetTouchFallback && e.touches.length === 1) {
        if (e.touches[0].target === lastTargetTouchFallback.target) {
            return getEventClientOffset(e.touches[0]);
        }
    }
    return;
}
exports.getEventClientTouchOffset = getEventClientTouchOffset;
function getEventClientOffset(e, lastTargetTouchFallback) {
    if ((0, predicates_1.isTouchEvent)(e)) {
        return getEventClientTouchOffset(e, lastTargetTouchFallback);
    }
    else {
        return {
            x: e.clientX,
            y: e.clientY,
        };
    }
}
exports.getEventClientOffset = getEventClientOffset;
