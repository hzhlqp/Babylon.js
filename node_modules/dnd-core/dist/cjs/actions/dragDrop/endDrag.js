"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createEndDrag = void 0;
const invariant_1 = require("@react-dnd/invariant");
const types_1 = require("./types");
function createEndDrag(manager) {
    return function endDrag() {
        const monitor = manager.getMonitor();
        const registry = manager.getRegistry();
        verifyIsDragging(monitor);
        const sourceId = monitor.getSourceId();
        if (sourceId != null) {
            const source = registry.getSource(sourceId, true);
            source.endDrag(monitor, sourceId);
            registry.unpinSource();
        }
        return { type: types_1.END_DRAG };
    };
}
exports.createEndDrag = createEndDrag;
function verifyIsDragging(monitor) {
    (0, invariant_1.invariant)(monitor.isDragging(), 'Cannot call endDrag while not dragging.');
}
