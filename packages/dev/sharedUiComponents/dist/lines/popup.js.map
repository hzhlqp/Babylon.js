{"version":3,"file":"popup.js","sourceRoot":"","sources":["../../src/lines/popup.ts"],"names":[],"mappings":"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","sourcesContent":["export class Popup {\r\n    public static CreatePopup(title: string, windowVariableName: string, width = 300, height = 800) {\r\n        const windowCreationOptionsList = {\r\n            width: width,\r\n            height: height,\r\n            top: (window.innerHeight - width) / 2 + window.screenY,\r\n            left: (window.innerWidth - height) / 2 + window.screenX,\r\n        };\r\n\r\n        const windowCreationOptions = Object.keys(windowCreationOptionsList)\r\n            .map((key) => key + \"=\" + (windowCreationOptionsList as any)[key])\r\n            .join(\",\");\r\n\r\n        const popupWindow = window.open(\"\", title, windowCreationOptions);\r\n        if (!popupWindow) {\r\n            return null;\r\n        }\r\n\r\n        const parentDocument = popupWindow.document;\r\n\r\n        // Font\r\n        const newLinkEl = parentDocument.createElement(\"link\");\r\n\r\n        newLinkEl.rel = \"stylesheet\";\r\n        newLinkEl.href = \"https://use.typekit.net/cta4xsb.css\";\r\n        parentDocument.head!.appendChild(newLinkEl);\r\n\r\n        parentDocument.title = title;\r\n        parentDocument.body.style.width = \"100%\";\r\n        parentDocument.body.style.height = \"100%\";\r\n        parentDocument.body.style.margin = \"0\";\r\n        parentDocument.body.style.padding = \"0\";\r\n\r\n        const parentControl = parentDocument.createElement(\"div\");\r\n        parentControl.style.width = \"100%\";\r\n        parentControl.style.height = \"100%\";\r\n        parentControl.style.margin = \"0\";\r\n        parentControl.style.padding = \"0\";\r\n\r\n        popupWindow.document.body.appendChild(parentControl);\r\n        this._CopyStyles(window.document, parentDocument);\r\n        setTimeout(() => {\r\n            // need this for late bindings\r\n            this._CopyStyles(window.document, parentDocument);\r\n        }, 0);\r\n\r\n        (this as any)[windowVariableName] = popupWindow;\r\n\r\n        return parentControl;\r\n    }\r\n\r\n    private static _CopyStyles(sourceDoc: HTMLDocument, targetDoc: HTMLDocument) {\r\n        for (let index = 0; index < sourceDoc.styleSheets.length; index++) {\r\n            const styleSheet: any = sourceDoc.styleSheets[index];\r\n            try {\r\n                if (styleSheet.cssRules) {\r\n                    // for <style> elements\r\n                    const newStyleEl = sourceDoc.createElement(\"style\");\r\n\r\n                    for (const cssRule of styleSheet.cssRules) {\r\n                        // write the text of each rule into the body of the style element\r\n                        newStyleEl.appendChild(sourceDoc.createTextNode(cssRule.cssText));\r\n                    }\r\n\r\n                    targetDoc.head!.appendChild(newStyleEl);\r\n                } else if (styleSheet.href) {\r\n                    // for <link> elements loading CSS from a URL\r\n                    const newLinkEl = sourceDoc.createElement(\"link\");\r\n\r\n                    newLinkEl.rel = \"stylesheet\";\r\n                    newLinkEl.href = styleSheet.href;\r\n                    targetDoc.head!.appendChild(newLinkEl);\r\n                }\r\n            } catch (e) {\r\n                // eslint-disable-next-line no-console\r\n                console.log(e);\r\n            }\r\n        }\r\n    }\r\n}\r\n"]}