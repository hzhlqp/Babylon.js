{"version":3,"file":"colorGradientStepGridComponent.js","sourceRoot":"","sources":["../../../../../../src/components/actionTabs/tabs/propertyGrids/particleSystems/colorGradientStepGridComponent.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTrash } from \"@fortawesome/free-solid-svg-icons\";\r\nimport type { GlobalState } from \"../../../../globalState\";\r\nimport { ColorGradient, Color3Gradient } from \"core/Misc/gradients\";\r\nimport type { LockObject } from \"shared-ui-components/tabs/propertyGrids/lockObject\";\r\nimport { Color3, Color4 } from \"core/Maths/math.color\";\r\nimport type { IParticleSystem } from \"core/Particles/IParticleSystem\";\r\nimport { ParticleSystem } from \"core/Particles/particleSystem\";\r\nimport { ColorPickerLine } from \"shared-ui-components/lines/colorPickerComponent\";\r\n\r\ninterface IColorGradientStepGridComponent {\r\n    globalState: GlobalState;\r\n    gradient: ColorGradient | Color3Gradient;\r\n    lockObject: LockObject;\r\n    lineIndex: number;\r\n    isColor3: boolean;\r\n    onDelete: () => void;\r\n    onUpdateGradient: () => void;\r\n    onCheckForReOrder: () => void;\r\n    host: IParticleSystem;\r\n    codeRecorderPropertyName: string;\r\n}\r\n\r\nexport class ColorGradientStepGridComponent extends React.Component<IColorGradientStepGridComponent, { gradient: number }> {\r\n    constructor(props: IColorGradientStepGridComponent) {\r\n        super(props);\r\n\r\n        this.state = { gradient: props.gradient.gradient };\r\n    }\r\n\r\n    updateColor1(color: string) {\r\n        if (this.props.gradient instanceof ColorGradient) {\r\n            this.props.gradient.color1 = Color4.FromHexString(color);\r\n        } else {\r\n            this.props.gradient.color = Color3.FromHexString(color);\r\n        }\r\n\r\n        this.props.onUpdateGradient();\r\n        this.forceUpdate();\r\n    }\r\n\r\n    updateColor2(color: string) {\r\n        if (this.props.gradient instanceof ColorGradient) {\r\n            this.props.gradient.color2 = Color4.FromHexString(color);\r\n        }\r\n\r\n        this.props.onUpdateGradient();\r\n        this.forceUpdate();\r\n    }\r\n\r\n    updateGradient(gradient: number) {\r\n        this.props.gradient.gradient = gradient;\r\n\r\n        this.setState({ gradient: gradient });\r\n\r\n        this.props.onUpdateGradient();\r\n    }\r\n\r\n    onPointerUp() {\r\n        this.props.onCheckForReOrder();\r\n    }\r\n\r\n    lock() {\r\n        if (this.props.lockObject) {\r\n            this.props.lockObject.lock = true;\r\n        }\r\n    }\r\n\r\n    unlock() {\r\n        if (this.props.lockObject) {\r\n            this.props.lockObject.lock = false;\r\n        }\r\n    }\r\n\r\n    override render() {\r\n        const gradient = this.props.gradient;\r\n\r\n        return (\r\n            <div className=\"gradient-step\">\r\n                <div className=\"step\">{`#${this.props.lineIndex}`}</div>\r\n                <div className=\"color1\">\r\n                    <ColorPickerLine\r\n                        lockObject={this.props.lockObject}\r\n                        value={gradient instanceof Color3Gradient ? gradient.color : gradient.color1}\r\n                        onColorChanged={(color) => {\r\n                            this.updateColor1(color);\r\n                        }}\r\n                    />\r\n                </div>\r\n                {this.props.host instanceof ParticleSystem && gradient instanceof ColorGradient && (\r\n                    <div className=\"color2\">\r\n                        <ColorPickerLine\r\n                            lockObject={this.props.lockObject}\r\n                            value={gradient.color2 ? gradient.color2 : new Color4()}\r\n                            onColorChanged={(color) => {\r\n                                this.updateColor2(color);\r\n                            }}\r\n                        />\r\n                    </div>\r\n                )}\r\n                <div className=\"step-value\">{gradient.gradient.toFixed(2)}</div>\r\n                <div className=\"step-slider\">\r\n                    <input\r\n                        className=\"range\"\r\n                        type=\"range\"\r\n                        step={0.01}\r\n                        min={0}\r\n                        max={1.0}\r\n                        value={gradient.gradient}\r\n                        onPointerUp={() => this.onPointerUp()}\r\n                        onChange={(evt) => this.updateGradient(parseFloat(evt.target.value))}\r\n                    />\r\n                </div>\r\n                <div className=\"gradient-delete hoverIcon\" onClick={() => this.props.onDelete()}>\r\n                    <FontAwesomeIcon icon={faTrash} />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"]}