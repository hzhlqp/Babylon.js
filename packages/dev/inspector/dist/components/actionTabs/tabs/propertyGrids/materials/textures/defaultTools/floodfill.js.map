{"version":3,"file":"floodfill.js","sourceRoot":"","sources":["../../../../../../../../src/components/actionTabs/tabs/propertyGrids/materials/textures/defaultTools/floodfill.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,iBAAiB,EAAE,MAAM,2BAA2B,CAAC;AAI9D,MAAM,CAAC,MAAM,SAAS,GAAc;IAChC,IAAI,EAAE,WAAW;IACjB,IAAI,EAAE;QAGF,YAAY,aAAoC;YAC5C,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACvC,CAAC;QAED,KAAK,CAAC,IAAI;YACN,MAAM,EAAE,QAAQ,EAAE,aAAa,EAAE,cAAc,EAAE,YAAY,EAAE,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YACvF,MAAM,GAAG,GAAG,MAAM,aAAa,EAAE,CAAC;YAClC,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAC,KAAK,CAAC;YAC/B,GAAG,CAAC,WAAW,GAAG,QAAQ,CAAC,KAAK,CAAC;YACjC,GAAG,CAAC,wBAAwB,GAAG,MAAM,CAAC;YACtC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YACxD,cAAc,EAAE,CAAC;YACjB,YAAY,EAAE,CAAC;QACnB,CAAC;QAED,KAAK;YACD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,KAAK,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,EAAE;gBACtF,IACI,WAAW,CAAC,IAAI,KAAK,iBAAiB,CAAC,WAAW;oBAClD,WAAW,CAAC,KAAK,CAAC,OAAO,KAAK,CAAC;oBAC/B,IAAI,CAAC,aAAa,EAAE,CAAC,kBAAkB,EAAE;oBACzC,WAAW,CAAC,QAAQ,EAAE,GAAG,EAC3B;oBACE,IAAI,CAAC,IAAI,EAAE,CAAC;iBACf;YACL,CAAC,CAAC,CAAC;QACP,CAAC;QACD,OAAO;YACH,IAAI,IAAI,CAAC,eAAe,EAAE;gBACtB,IAAI,CAAC,aAAa,EAAE,CAAC,KAAK,CAAC,mBAAmB,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;aAC/E;QACL,CAAC;KACJ;IACD,IAAI,EAAE;;;;iEAIuD;CAChE,CAAC","sourcesContent":["import type { IToolParameters, IToolData } from \"../textureEditorComponent\";\r\nimport type { PointerInfo } from \"core/Events/pointerEvents\";\r\nimport { PointerEventTypes } from \"core/Events/pointerEvents\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\n\r\nexport const Floodfill: IToolData = {\r\n    name: \"Floodfill\",\r\n    type: class {\r\n        getParameters: () => IToolParameters;\r\n        pointerObserver: Nullable<Observer<PointerInfo>>;\r\n        constructor(getParameters: () => IToolParameters) {\r\n            this.getParameters = getParameters;\r\n        }\r\n\r\n        async fill() {\r\n            const { metadata, startPainting, updatePainting, stopPainting } = this.getParameters();\r\n            const ctx = await startPainting();\r\n            ctx.fillStyle = metadata.color;\r\n            ctx.globalAlpha = metadata.alpha;\r\n            ctx.globalCompositeOperation = \"copy\";\r\n            ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n            updatePainting();\r\n            stopPainting();\r\n        }\r\n\r\n        setup() {\r\n            this.pointerObserver = this.getParameters().scene.onPointerObservable.add((pointerInfo) => {\r\n                if (\r\n                    pointerInfo.type === PointerEventTypes.POINTERDOWN &&\r\n                    pointerInfo.event.buttons === 1 &&\r\n                    this.getParameters().interactionEnabled() &&\r\n                    pointerInfo.pickInfo?.hit\r\n                ) {\r\n                    this.fill();\r\n                }\r\n            });\r\n        }\r\n        cleanup() {\r\n            if (this.pointerObserver) {\r\n                this.getParameters().scene.onPointerObservable.remove(this.pointerObserver);\r\n            }\r\n        }\r\n    },\r\n    icon: `PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDQwIDQwIj48cmVjdCB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHN0eWxlPSJmaWxsOm5vbmUiLz48cGF0aCBkPSJNMjAsMTAuNWEu\r\n    NzUuNzUsMCwwLDAtMS41LDB2MS4yNWEyLjE0LDIuMTQsMCwwLDAtLjg0LjUzbC02Ljg4LDYuODhhMi4yNSwyLjI1LDAsMCwwLDAsMy4xOGw0Ljg4LDQuODhhMi4yNSwyLjI1LDAsMCwwLDMuMTgsMGw2Ljg4LTYuODhhMi4yNSwyLjI1LDAsMCwwLDAtMy4xOGwtNC44\r\n    OC00Ljg4YTIuMjksMi4yOSwwLDAsMC0uODQtLjUzWm0tOC4xNiw5LjcyLDYuNjYtNi42NlYxNUEuNzUuNzUsMCwwLDAsMjAsMTVWMTMuNTZsNC42Niw0LjY2YS43NS43NSwwLDAsMSwwLDEuMDZsLTEsMUgxMS44Wm0uNDcsMS41M2g5Ljg4bC00LjQxLDQuNDFhLjc1\r\n    Ljc1LDAsMCwxLTEuMDYsMFoiIHN0eWxlPSJmaWxsOiNmZmYiLz48cGF0aCBkPSJNMjcuNTEsMjEuODVhLjg4Ljg4LDAsMCwwLTEuNTQsMGwtMiwzLjc3YTMuMTUsMy4xNSwwLDEsMCw1LjU2LDBabS0yLjIzLDQuNDcsMS40Ni0yLjczLDEuNDUsMi43M2ExLjY1LDEu\r\n    NjUsMCwxLDEtMi45MSwwWiIgc3R5bGU9ImZpbGw6I2ZmZiIvPjwvc3ZnPg==`,\r\n};\r\n"]}