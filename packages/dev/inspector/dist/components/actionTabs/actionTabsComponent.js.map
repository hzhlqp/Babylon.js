{"version":3,"file":"actionTabsComponent.js","sourceRoot":"","sources":["../../../src/components/actionTabs/actionTabsComponent.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from \"react\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport type { Scene } from \"core/scene\";\r\nimport { DebugLayerTab } from \"core/Debug/debugLayer\";\r\nimport { TabsComponent } from \"./tabsComponent\";\r\nimport { faFileAlt, faWrench, faBug, faChartBar, faCog } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { StatisticsTabComponent } from \"./tabs/statisticsTabComponent\";\r\nimport { DebugTabComponent } from \"./tabs/debugTabComponent\";\r\nimport { Resizable } from \"re-resizable\";\r\nimport { PropertyGridTabComponent } from \"./tabs/propertyGridTabComponent\";\r\nimport { HeaderComponent } from \"../headerComponent\";\r\nimport { ToolsTabComponent } from \"./tabs/toolsTabComponent\";\r\nimport type { GlobalState } from \"../../components/globalState\";\r\nimport { SettingsTabComponent } from \"./tabs/settingsTabComponent\";\r\n\r\nimport \"./actionTabs.scss\";\r\n\r\nconst ResizableCasted = Resizable as any as React.ComponentClass<any>;\r\n\r\ninterface IActionTabsComponentProps {\r\n    scene?: Scene;\r\n    noCommands?: boolean;\r\n    noHeader?: boolean;\r\n    noExpand?: boolean;\r\n    noClose?: boolean;\r\n    popupMode?: boolean;\r\n    onPopup?: () => void;\r\n    onClose?: () => void;\r\n    globalState?: GlobalState;\r\n    initialTab?: DebugLayerTab;\r\n}\r\n\r\nexport class ActionTabsComponent extends React.Component<IActionTabsComponentProps, { selectedEntity: any; selectedIndex: number }> {\r\n    private _onSelectionChangeObserver: Nullable<Observer<any>>;\r\n    private _onTabChangedObserver: Nullable<Observer<any>>;\r\n    private _once = true;\r\n\r\n    constructor(props: IActionTabsComponentProps) {\r\n        super(props);\r\n\r\n        let initialIndex = props.initialTab === undefined ? DebugLayerTab.Properties : props.initialTab;\r\n\r\n        if (this.props.globalState) {\r\n            const validationResults = this.props.globalState.validationResults;\r\n            if (validationResults) {\r\n                if (validationResults.issues.numErrors || validationResults.issues.numWarnings) {\r\n                    initialIndex = DebugLayerTab.Tools;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.state = { selectedEntity: null, selectedIndex: initialIndex };\r\n    }\r\n\r\n    override componentDidMount() {\r\n        if (this.props.globalState) {\r\n            this._onSelectionChangeObserver = this.props.globalState.onSelectionChangedObservable.add((entity) => {\r\n                this.setState({ selectedEntity: entity, selectedIndex: DebugLayerTab.Properties });\r\n            });\r\n\r\n            this._onTabChangedObserver = this.props.globalState.onTabChangedObservable.add((index) => {\r\n                this.setState({ selectedIndex: index });\r\n            });\r\n        }\r\n    }\r\n\r\n    override componentWillUnmount() {\r\n        if (this.props.globalState) {\r\n            if (this._onSelectionChangeObserver) {\r\n                this.props.globalState.onSelectionChangedObservable.remove(this._onSelectionChangeObserver);\r\n            }\r\n\r\n            if (this._onTabChangedObserver) {\r\n                this.props.globalState.onTabChangedObservable.remove(this._onTabChangedObserver);\r\n            }\r\n        }\r\n    }\r\n\r\n    changeSelectedTab(index: number) {\r\n        if (this.props.globalState) {\r\n            this.props.globalState.onTabChangedObservable.notifyObservers(index);\r\n        }\r\n    }\r\n\r\n    renderContent() {\r\n        if (this.props.globalState && this.props.scene) {\r\n            return (\r\n                <TabsComponent selectedIndex={this.state.selectedIndex} onSelectedIndexChange={(value) => this.changeSelectedTab(value)}>\r\n                    <PropertyGridTabComponent\r\n                        title=\"Properties\"\r\n                        icon={faFileAlt}\r\n                        scene={this.props.scene}\r\n                        selectedEntity={this.state.selectedEntity}\r\n                        globalState={this.props.globalState}\r\n                        onSelectionChangedObservable={this.props.globalState.onSelectionChangedObservable}\r\n                        onPropertyChangedObservable={this.props.globalState.onPropertyChangedObservable}\r\n                    />\r\n                    <DebugTabComponent title=\"Debug\" icon={faBug} scene={this.props.scene} globalState={this.props.globalState} />\r\n                    <StatisticsTabComponent title=\"Statistics\" icon={faChartBar} scene={this.props.scene} globalState={this.props.globalState} />\r\n                    <ToolsTabComponent title=\"Tools\" icon={faWrench} scene={this.props.scene} globalState={this.props.globalState} />\r\n                    <SettingsTabComponent title=\"Settings\" icon={faCog} scene={this.props.scene} globalState={this.props.globalState} />\r\n                </TabsComponent>\r\n            );\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    onClose() {\r\n        if (!this.props.onClose) {\r\n            return;\r\n        }\r\n        this.props.onClose();\r\n    }\r\n\r\n    onPopup() {\r\n        if (!this.props.onPopup) {\r\n            return;\r\n        }\r\n        this.props.onPopup();\r\n    }\r\n\r\n    override render() {\r\n        if (this.props.popupMode) {\r\n            return (\r\n                <div id=\"actionTabs\">\r\n                    {!this.props.noHeader && (\r\n                        <HeaderComponent\r\n                            title=\"INSPECTOR\"\r\n                            handleBack={true}\r\n                            noClose={this.props.noClose}\r\n                            noExpand={this.props.noExpand}\r\n                            noCommands={this.props.noCommands}\r\n                            onClose={() => this.onClose()}\r\n                            onPopup={() => this.onPopup()}\r\n                            onSelectionChangedObservable={this.props.globalState ? this.props.globalState.onSelectionChangedObservable : undefined}\r\n                        />\r\n                    )}\r\n                    {this.renderContent()}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (this._once) {\r\n            this._once = false;\r\n            // A bit hacky but no other way to force the initial width to 300px and not auto\r\n            setTimeout(() => {\r\n                const element = document.getElementById(\"actionTabs\");\r\n                if (!element) {\r\n                    return;\r\n                }\r\n                element.style.width = \"200px\";\r\n            }, 150);\r\n        }\r\n\r\n        return (\r\n            <ResizableCasted\r\n                id=\"actionTabs\"\r\n                minWidth={300}\r\n                maxWidth={600}\r\n                defaultSize={{ height: \"100%\" }}\r\n                minHeight=\"100%\"\r\n                enable={{ top: false, right: false, bottom: false, left: true, topRight: false, bottomRight: false, bottomLeft: false, topLeft: false }}\r\n            >\r\n                {!this.props.noHeader && (\r\n                    <HeaderComponent\r\n                        title=\"INSPECTOR\"\r\n                        handleBack={true}\r\n                        noClose={this.props.noClose}\r\n                        noExpand={this.props.noExpand}\r\n                        noCommands={this.props.noCommands}\r\n                        onClose={() => this.onClose()}\r\n                        onPopup={() => this.onPopup()}\r\n                        onSelectionChangedObservable={this.props.globalState ? this.props.globalState.onSelectionChangedObservable : undefined}\r\n                    />\r\n                )}\r\n                {this.renderContent()}\r\n            </ResizableCasted>\r\n        );\r\n    }\r\n}\r\n"]}