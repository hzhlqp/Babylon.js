{"version":3,"file":"commandDropdownComponent.js","sourceRoot":"","sources":["../../src/components/commandDropdownComponent.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from \"react\";\r\nimport type { GlobalState } from \"../globalState\";\r\nimport { FileButtonLine } from \"shared-ui-components/lines/fileButtonLineComponent\";\r\n\r\ninterface ICommandDropdownComponentProps {\r\n    globalState: GlobalState;\r\n    icon?: string;\r\n    tooltip: string;\r\n    defaultValue?: string;\r\n    items: {\r\n        label: string;\r\n        icon?: string;\r\n        fileButton?: boolean;\r\n        loadControlButton?: boolean;\r\n        onClick?: () => void;\r\n        onCheck?: (value: boolean) => void;\r\n        storeKey?: string;\r\n        isActive?: boolean;\r\n        defaultValue?: boolean | string;\r\n        subItems?: string[];\r\n    }[];\r\n    toRight?: boolean;\r\n}\r\n\r\nexport class CommandDropdownComponent extends React.Component<ICommandDropdownComponentProps, { isExpanded: boolean; activeState: string }> {\r\n    public constructor(props: ICommandDropdownComponentProps) {\r\n        super(props);\r\n\r\n        this.state = { isExpanded: false, activeState: \"\" };\r\n    }\r\n\r\n    public override render() {\r\n        return (\r\n            <>\r\n                {this.state.isExpanded && (\r\n                    <div\r\n                        className=\"command-dropdown-blocker\"\r\n                        onClick={() => {\r\n                            this.setState({ isExpanded: false });\r\n                        }}\r\n                    ></div>\r\n                )}\r\n                <div className=\"command-dropdown-root\">\r\n                    <div\r\n                        className={\"command-dropdown\" + (this.state.isExpanded ? \" activated\" : \"\")}\r\n                        title={this.props.tooltip}\r\n                        onClick={() => {\r\n                            this.setState({ isExpanded: false });\r\n                            const newState = !this.state.isExpanded;\r\n                            const pgHost = document.getElementById(\"embed-host\");\r\n\r\n                            if (pgHost) {\r\n                                pgHost.style.zIndex = newState ? \"0\" : \"10\";\r\n                            }\r\n\r\n                            this.setState({ isExpanded: newState });\r\n                        }}\r\n                    >\r\n                        {this.props.icon && (\r\n                            <div className=\"command-dropdown-icon\">\r\n                                <img src={this.props.icon} />\r\n                            </div>\r\n                        )}\r\n                        {!this.props.icon && <div className=\"command-dropdown-active\"></div>}\r\n                    </div>\r\n                    {this.state.isExpanded && (\r\n                        <div className={\"command-dropdown-content sub1\" + (this.props.toRight ? \" toRight\" : \"\")}>\r\n                            {this.props.items.map((m) => {\r\n                                if (!m.fileButton) {\r\n                                    return (\r\n                                        <div\r\n                                            className={\"command-dropdown-label\" + (m.isActive ? \" active\" : \"\")}\r\n                                            key={m.label}\r\n                                            onClick={() => {\r\n                                                if (!m.onClick) {\r\n                                                    this.forceUpdate();\r\n                                                    return;\r\n                                                }\r\n                                                if (!m.subItems) {\r\n                                                    m.onClick();\r\n\r\n                                                    this.setState({ isExpanded: false, activeState: m.label });\r\n                                                }\r\n                                            }}\r\n                                            title={m.label}\r\n                                        >\r\n                                            {!m.icon && <div className=\"command-dropdown-label-text\">{(m.isActive ? \"> \" : \"\") + m.label}</div>}\r\n                                            {m.icon && (\r\n                                                <div className=\"command-dropdown-icon\">\r\n                                                    <img src={m.icon} />\r\n                                                </div>\r\n                                            )}\r\n                                            {m.onCheck && (\r\n                                                <input\r\n                                                    type=\"checkBox\"\r\n                                                    className=\"command-dropdown-label-check\"\r\n                                                    onChange={(evt) => {\r\n                                                        this.forceUpdate();\r\n                                                        m.onCheck!(evt.target.checked);\r\n                                                    }}\r\n                                                    checked={false}\r\n                                                />\r\n                                            )}\r\n                                            {m.subItems && <div className=\"command-dropdown-arrow\">{\">\"}</div>}\r\n                                            {m.subItems && (\r\n                                                <div className={\"sub-items \"}>\r\n                                                    {m.subItems.map((s) => {\r\n                                                        return (\r\n                                                            <div\r\n                                                                key={s}\r\n                                                                className={\"sub-item\"}\r\n                                                                onClick={() => {\r\n                                                                    m.onClick!();\r\n                                                                    this.setState({ isExpanded: false });\r\n                                                                }}\r\n                                                            >\r\n                                                                <div className=\"sub-item-label\">{s}</div>\r\n                                                            </div>\r\n                                                        );\r\n                                                    })}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    );\r\n                                } else {\r\n                                    return (\r\n                                        <FileButtonLine\r\n                                            key={m.label}\r\n                                            label={!m.loadControlButton ? \"Load\" : \"Load control\"}\r\n                                            onClick={(file) => this.props.globalState[!m.loadControlButton ? \"onLoadObservable\" : \"onControlLoadObservable\"].notifyObservers(file)}\r\n                                            accept=\".json\"\r\n                                        />\r\n                                    );\r\n                                }\r\n                            })}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n"]}