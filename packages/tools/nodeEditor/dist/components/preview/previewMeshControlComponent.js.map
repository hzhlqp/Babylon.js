{"version":3,"file":"previewMeshControlComponent.js","sourceRoot":"","sources":["../../../src/components/preview/previewMeshControlComponent.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from \"react\";\r\nimport type { GlobalState } from \"../../globalState\";\r\nimport { Color3, Color4 } from \"core/Maths/math.color\";\r\nimport { PreviewType } from \"./previewType\";\r\nimport { DataStorage } from \"core/Misc/dataStorage\";\r\nimport type { Observer } from \"core/Misc/observable\";\r\nimport type { Nullable } from \"core/types\";\r\nimport { NodeMaterialModes } from \"core/Materials/Node/Enums/nodeMaterialModes\";\r\n\r\nimport popUpIcon from \"./svgs/popOut.svg\";\r\nimport colorPicker from \"./svgs/colorPicker.svg\";\r\nimport envPicker from \"./svgs/envPicker.svg\";\r\nimport pauseIcon from \"./svgs/pauseIcon.svg\";\r\nimport playIcon from \"./svgs/playIcon.svg\";\r\nimport { OptionsLine } from \"shared-ui-components/lines/optionsLineComponent\";\r\n\r\ninterface IPreviewMeshControlComponent {\r\n    globalState: GlobalState;\r\n    togglePreviewAreaComponent: () => void;\r\n}\r\n\r\nexport class PreviewMeshControlComponent extends React.Component<IPreviewMeshControlComponent> {\r\n    private _colorInputRef: React.RefObject<HTMLInputElement>;\r\n    private _filePickerRef: React.RefObject<HTMLInputElement>;\r\n    private _envPickerRef: React.RefObject<HTMLInputElement>;\r\n    private _onResetRequiredObserver: Nullable<Observer<boolean>>;\r\n    private _onDropEventObserver: Nullable<Observer<DragEvent>>;\r\n    private _onRefreshPreviewMeshControlComponentRequiredObserver: Nullable<Observer<void>>;\r\n\r\n    constructor(props: IPreviewMeshControlComponent) {\r\n        super(props);\r\n        this._colorInputRef = React.createRef();\r\n        this._filePickerRef = React.createRef();\r\n        this._envPickerRef = React.createRef();\r\n\r\n        this._onResetRequiredObserver = this.props.globalState.onResetRequiredObservable.add(() => {\r\n            this.forceUpdate();\r\n        });\r\n\r\n        this._onDropEventObserver = this.props.globalState.onDropEventReceivedObservable.add((event) => {\r\n            this.useCustomMesh(event);\r\n        });\r\n\r\n        this._onRefreshPreviewMeshControlComponentRequiredObserver = this.props.globalState.onRefreshPreviewMeshControlComponentRequiredObservable.add(() => {\r\n            this.forceUpdate();\r\n        });\r\n    }\r\n\r\n    override componentWillUnmount() {\r\n        this.props.globalState.onResetRequiredObservable.remove(this._onResetRequiredObserver);\r\n        this.props.globalState.onDropEventReceivedObservable.remove(this._onDropEventObserver);\r\n        this.props.globalState.onRefreshPreviewMeshControlComponentRequiredObservable.remove(this._onRefreshPreviewMeshControlComponentRequiredObserver);\r\n    }\r\n\r\n    changeMeshType(newOne: PreviewType) {\r\n        if (this.props.globalState.previewType === newOne) {\r\n            return;\r\n        }\r\n\r\n        this.props.globalState.previewType = newOne;\r\n        this.props.globalState.stateManager.onPreviewCommandActivated.notifyObservers(false);\r\n\r\n        DataStorage.WriteNumber(\"PreviewType\", newOne);\r\n\r\n        this.forceUpdate();\r\n    }\r\n\r\n    useCustomMesh(evt: any) {\r\n        const files: File[] = evt.target?.files || evt.dataTransfer?.files;\r\n        if (files && files.length) {\r\n            const file = files[0];\r\n\r\n            this.props.globalState.previewFile = file;\r\n            this.props.globalState.previewType = PreviewType.Custom;\r\n            this.props.globalState.listOfCustomPreviewFiles = [...files];\r\n            this.props.globalState.stateManager.onPreviewCommandActivated.notifyObservers(false);\r\n            this.forceUpdate();\r\n        }\r\n        if (this._filePickerRef.current) {\r\n            this._filePickerRef.current.value = \"\";\r\n        }\r\n    }\r\n    useCustomEnv(evt: any) {\r\n        const files: File[] = evt.target?.files || evt.dataTransfer?.files;\r\n        if (files && files.length) {\r\n            const file = files[0];\r\n            this.props.globalState.envFile = file;\r\n            this.props.globalState.envType = PreviewType.Custom;\r\n            this.props.globalState.stateManager.onPreviewCommandActivated.notifyObservers(false);\r\n            this.forceUpdate();\r\n        }\r\n        if (this._envPickerRef.current) {\r\n            this._envPickerRef.current.value = \"\";\r\n        }\r\n    }\r\n\r\n    onPopUp() {\r\n        this.props.togglePreviewAreaComponent();\r\n    }\r\n\r\n    changeAnimation() {\r\n        this.props.globalState.rotatePreview = !this.props.globalState.rotatePreview;\r\n        this.props.globalState.onAnimationCommandActivated.notifyObservers();\r\n        this.forceUpdate();\r\n    }\r\n\r\n    changeBackground(value: string) {\r\n        const newColor = Color3.FromHexString(value);\r\n\r\n        DataStorage.WriteNumber(\"BackgroundColorR\", newColor.r);\r\n        DataStorage.WriteNumber(\"BackgroundColorG\", newColor.g);\r\n        DataStorage.WriteNumber(\"BackgroundColorB\", newColor.b);\r\n\r\n        const newBackgroundColor = Color4.FromColor3(newColor, 1.0);\r\n        this.props.globalState.backgroundColor = newBackgroundColor;\r\n        this.props.globalState.onPreviewBackgroundChanged.notifyObservers();\r\n    }\r\n\r\n    changeBackgroundClick() {\r\n        this._colorInputRef.current?.click();\r\n    }\r\n\r\n    override render() {\r\n        const meshTypeOptions = [\r\n            { label: \"Cube\", value: PreviewType.Box },\r\n            { label: \"Cylinder\", value: PreviewType.Cylinder },\r\n            { label: \"Plane\", value: PreviewType.Plane },\r\n            { label: \"Shader ball\", value: PreviewType.ShaderBall },\r\n            { label: \"Sphere\", value: PreviewType.Sphere },\r\n            { label: \"Load...\", value: PreviewType.Custom + 1 },\r\n        ];\r\n\r\n        const particleTypeOptions = [\r\n            { label: \"Default\", value: PreviewType.DefaultParticleSystem },\r\n            { label: \"Bubbles\", value: PreviewType.Bubbles },\r\n            { label: \"Explosion\", value: PreviewType.Explosion },\r\n            { label: \"Fire\", value: PreviewType.Fire },\r\n            { label: \"Rain\", value: PreviewType.Rain },\r\n            { label: \"Smoke\", value: PreviewType.Smoke },\r\n            { label: \"Load...\", value: PreviewType.Custom + 1 },\r\n        ];\r\n\r\n        const gaussianSplattingTypeOptions = [\r\n            { label: \"Default\", value: PreviewType.Parrot },\r\n            { label: \"Bricks Skull\", value: PreviewType.BricksSkull },\r\n            { label: \"Plants\", value: PreviewType.Plants },\r\n            { label: \"Load...\", value: PreviewType.Custom + 1 },\r\n        ];\r\n\r\n        if (this.props.globalState.listOfCustomPreviewFiles.length > 0) {\r\n            meshTypeOptions.splice(0, 0, {\r\n                label: \"Custom\",\r\n                value: PreviewType.Custom,\r\n            });\r\n\r\n            particleTypeOptions.splice(0, 0, {\r\n                label: \"Custom\",\r\n                value: PreviewType.Custom,\r\n            });\r\n\r\n            gaussianSplattingTypeOptions.splice(0, 0, {\r\n                label: \"Custom\",\r\n                value: PreviewType.Custom,\r\n            });\r\n        }\r\n\r\n        const options =\r\n            this.props.globalState.mode === NodeMaterialModes.Particle\r\n                ? particleTypeOptions\r\n                : this.props.globalState.mode === NodeMaterialModes.GaussianSplatting\r\n                  ? gaussianSplattingTypeOptions\r\n                  : meshTypeOptions;\r\n        const accept = this.props.globalState.mode === NodeMaterialModes.Particle ? \".json\" : \".*\";\r\n\r\n        return (\r\n            <div id=\"preview-mesh-bar\">\r\n                {(this.props.globalState.mode === NodeMaterialModes.Material ||\r\n                    this.props.globalState.mode === NodeMaterialModes.Particle ||\r\n                    this.props.globalState.mode === NodeMaterialModes.GaussianSplatting) && (\r\n                    <>\r\n                        <OptionsLine\r\n                            label=\"\"\r\n                            options={options}\r\n                            target={this.props.globalState}\r\n                            propertyName=\"previewType\"\r\n                            noDirectUpdate={true}\r\n                            onSelect={(value: any) => {\r\n                                if (value !== PreviewType.Custom + 1) {\r\n                                    this.changeMeshType(value);\r\n                                } else {\r\n                                    this._filePickerRef.current?.click();\r\n                                }\r\n                            }}\r\n                        />\r\n                        <div\r\n                            style={{\r\n                                display: \"none\",\r\n                            }}\r\n                            title=\"Preview with a custom mesh\"\r\n                        >\r\n                            <input ref={this._filePickerRef} multiple id=\"file-picker\" type=\"file\" onChange={(evt) => this.useCustomMesh(evt)} accept={accept} />\r\n                            <input ref={this._envPickerRef} id=\"env-picker\" accept=\".env\" type=\"file\" onChange={(evt) => this.useCustomEnv(evt)}></input>\r\n                        </div>\r\n                    </>\r\n                )}\r\n                {this.props.globalState.mode === NodeMaterialModes.Material && (\r\n                    <>\r\n                        <div id=\"env-button\" title=\"Environment image\" className=\"button\" onClick={(_) => this._envPickerRef.current?.click()}>\r\n                            <img src={envPicker} alt=\"\" id=\"env-picker-image\" />\r\n                        </div>\r\n                        <div title=\"Turn-table animation\" onClick={() => this.changeAnimation()} className=\"button\" id=\"play-button\">\r\n                            {this.props.globalState.rotatePreview ? <img src={pauseIcon} alt=\"\" /> : <img src={playIcon} alt=\"\" />}\r\n                        </div>\r\n                        <div id=\"color-picker-button\" title=\"Background color\" className={\"button align\"} onClick={(_) => this.changeBackgroundClick()}>\r\n                            <img src={colorPicker} alt=\"\" id=\"color-picker-image\" />\r\n                            <input\r\n                                ref={this._colorInputRef}\r\n                                id=\"color-picker\"\r\n                                type=\"color\"\r\n                                value={this.props.globalState.backgroundColor.toHexString().slice(0, 7)}\r\n                                onChange={(evt) => this.changeBackground(evt.target.value)}\r\n                            />\r\n                        </div>\r\n                    </>\r\n                )}\r\n                <div title=\"Open preview in new window\" id=\"preview-new-window\" onClick={() => this.onPopUp()} className=\"button\">\r\n                    <img src={popUpIcon} alt=\"\" />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"]}