{"version":3,"file":"imageSourcePropertyTabComponent.js","sourceRoot":"","sources":["../../../src/graphSystem/properties/imageSourcePropertyTabComponent.tsx"],"names":[],"mappings":";AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAE/B,OAAO,EAAE,cAAc,EAAE,MAAM,oDAAoD,CAAC;AACpF,OAAO,EAAE,KAAK,EAAE,MAAM,iBAAiB,CAAC;AACxC,OAAO,EAAE,sBAAsB,EAAE,MAAM,mDAAmD,CAAC;AAC3F,OAAO,EAAE,qBAAqB,EAAE,MAAM,8CAA8C,CAAC;AACrF,OAAO,EAAE,OAAO,EAAE,MAAM,iCAAiC,CAAC;AAE1D,OAAO,EAAE,2BAA2B,EAAE,2BAA2B,EAAE,MAAM,gCAAgC,CAAC;AAG1G,OAAO,EAAE,sBAAsB,EAAE,MAAM,mDAAmD,CAAC;AAE3F,OAAO,EAAE,mBAAmB,EAAE,MAAM,gDAAgD,CAAC;AACrF,OAAO,EAAE,WAAW,EAAE,MAAM,iDAAiD,CAAC;AAC9E,OAAO,EAAE,kBAAkB,EAAE,MAAM,+CAA+C,CAAC;AACnF,OAAO,EAAE,mBAAmB,EAAE,MAAM,gDAAgD,CAAC;AAErF,MAAM,OAAO,+BAAgC,SAAQ,KAAK,CAAC,SAA2D;IAClH,IAAI,gBAAgB;QAChB,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAwB,CAAC;IACxD,CAAC;IAED,YAAY,KAA8B;QACtC,KAAK,CAAC,KAAK,CAAC,CAAC;QAEb,MAAM,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAsB,CAAC;QAE7D,IAAI,CAAC,KAAK,GAAG,EAAE,UAAU,EAAE,CAAC,OAAO,IAAI,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,MAAM,EAAE,CAAC;IACrF,CAAC;IAED,gEAAgE;IACvD,0BAA0B,CAAC,SAAkC,EAAE,SAA8D;QAClI,IAAI,SAAS,CAAC,QAAQ,CAAC,IAAI,KAAK,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,EAAE;YACtD,MAAM,OAAO,GAAI,SAAS,CAAC,QAAQ,CAAC,IAAyB,CAAC,OAAsB,CAAC;YAErF,SAAS,CAAC,UAAU,GAAG,CAAC,OAAO,IAAI,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,MAAM,CAAC;YAC3E,SAAS,CAAC,iBAAiB,GAAG,OAAO,IAAI,OAAO,CAAC,MAAM,CAAC;SAC3D;IACL,CAAC;IAEO,uBAAuB;QAC3B,OAAO,sBAAsB,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,EAAE;YAC/C,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;YACnC,OAAO,CAAC,CAAC,QAAQ,EAAE,CAAC;QACxB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,sBAAsB;QAClB,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,0BAA0B,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAyB,CAAC,CAAC;QAClH,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,2BAA2B,CAAC,eAAe,EAAE,CAAC;QACtE,IAAI,CAAC,WAAW,EAAE,CAAC;IACvB,CAAC;IAED,aAAa;QACT,IAAI,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAsB,CAAC;QAE3D,IAAI,OAAO,EAAE;YACT,OAAO,CAAC,OAAO,EAAE,CAAC;YACjB,OAAe,GAAG,IAAI,CAAC;YACxB,IAAI,CAAC,gBAAgB,CAAC,OAAO,GAAG,IAAI,CAAC;SACxC;QAED,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAClC,CAAC;IAED,eAAe;QACX,IAAI,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAsB,CAAC;QAE3D,IAAI,OAAO,EAAE;YACT,OAAO,CAAC,OAAO,EAAE,CAAC;YACjB,OAAe,GAAG,IAAI,CAAC;SAC3B;QAED,IAAI,CAAC,OAAO,EAAE;YACV,IAAI,CAAC,gBAAgB,CAAC,OAAO,GAAG,IAAI,OAAO,CAAC,IAAI,EAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,IAAoB,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;YACvI,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC;YACxC,OAAO,CAAC,eAAe,GAAG,OAAO,CAAC,oBAAoB,CAAC;SAC1D;IACL,CAAC;IAED;;;OAGG;IACH,cAAc,CAAC,IAAU;QACrB,IAAI,CAAC,eAAe,EAAE,CAAC;QAEvB,MAAM,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAsB,CAAC;QAC7D,KAAK,CAAC,QAAQ,CACV,IAAI,EACJ,CAAC,IAAI,EAAE,EAAE;YACL,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,EAAE,cAAc,EAAE,CAAC,CAAC;YAExD,MAAM,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;YAChC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAC3B,MAAM,CAAC,SAAS,GAAG,GAAG,EAAE;gBACpB,MAAM,UAAU,GAAG,MAAM,CAAC,MAAgB,CAAC;gBAE3C,IAAI,SAAS,GAAuB,SAAS,CAAC;gBAC9C,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE;oBAC7C,SAAS,GAAG,MAAM,CAAC;iBACtB;qBAAM,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE;oBACpD,SAAS,GAAG,MAAM,CAAC;iBACtB;gBACA,OAAmB,CAAC,SAAS,CAAC,UAAU,EAAE,SAAS,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,sBAAsB,EAAE,CAAC,CAAC;YAC/F,CAAC,CAAC;QACN,CAAC,EACD,SAAS,EACT,IAAI,CACP,CAAC;IACN,CAAC;IAED,qBAAqB,CAAC,GAAW;QAC7B,IAAI,CAAC,eAAe,EAAE,CAAC;QAEvB,MAAM,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAsB,CAAC;QAC5D,OAAmB,CAAC,SAAS,CAAC,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,sBAAsB,EAAE,CAAC,CAAC;IACnF,CAAC;IAEQ,MAAM;QACX,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAyB,CAAC;QAE5D,MAAM,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAsB,CAAC;QAC7D,IAAI,OAAO,IAAI,OAAO,CAAC,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,MAAM,EAAE;YACpE,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC;SACtB;QAED,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;QAEvC,MAAM,YAAY,GAAG;YACjB,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE,OAAO,CAAC,eAAe,EAAE;YACpD,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,CAAC,aAAa,EAAE;YAEjD,EAAE,KAAK,EAAE,qBAAqB,EAAE,KAAK,EAAE,OAAO,CAAC,uBAAuB,EAAE;YACxE,EAAE,KAAK,EAAE,sBAAsB,EAAE,KAAK,EAAE,OAAO,CAAC,wBAAwB,EAAE;YAE1E,EAAE,KAAK,EAAE,sBAAsB,EAAE,KAAK,EAAE,OAAO,CAAC,yBAAyB,EAAE;YAC3E,EAAE,KAAK,EAAE,uBAAuB,EAAE,KAAK,EAAE,OAAO,CAAC,0BAA0B,EAAE;YAE7E,EAAE,KAAK,EAAE,gBAAgB,EAAE,KAAK,EAAE,OAAO,CAAC,cAAc,EAAE;YAC1D,EAAE,KAAK,EAAE,6BAA6B,EAAE,KAAK,EAAE,OAAO,CAAC,wBAAwB,EAAE;YACjF,EAAE,KAAK,EAAE,8BAA8B,EAAE,KAAK,EAAE,OAAO,CAAC,yBAAyB,EAAE;YAEnF,EAAE,KAAK,EAAE,gBAAgB,EAAE,KAAK,EAAE,OAAO,CAAC,cAAc,EAAE;YAC1D,EAAE,KAAK,EAAE,6BAA6B,EAAE,KAAK,EAAE,OAAO,CAAC,wBAAwB,EAAE;YACjF,EAAE,KAAK,EAAE,8BAA8B,EAAE,KAAK,EAAE,OAAO,CAAC,yBAAyB,EAAE,EAAE,IAAI;SAC5F,CAAC;QAEF,OAAO,CACH,0BACI,KAAC,2BAA2B,IAAC,YAAY,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAI,EACrG,MAAC,sBAAsB,IAAC,KAAK,EAAC,YAAY,aACrC,OAAO,IAAI,OAAO,CAAC,kBAAkB,IAAI,CACtC,KAAC,WAAW,IACR,KAAK,EAAC,UAAU,EAChB,OAAO,EAAE,YAAY,EACrB,MAAM,EAAE,OAAO,EACf,cAAc,EAAE,IAAI,EACpB,YAAY,EAAC,cAAc,EAC3B,QAAQ,EAAE,CAAC,KAAK,EAAE,EAAE;gCAChB,OAAO,CAAC,kBAAkB,CAAC,KAAe,CAAC,CAAC;gCAC5C,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,0BAA0B,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;4BAC9E,CAAC,GACH,CACL,EACA,OAAO,IAAI,CACR,KAAC,qBAAqB,IAClB,KAAK,EAAC,SAAS,EACf,UAAU,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,KAAK,OAAO,CAAC,iBAAiB,EAC7D,QAAQ,EAAE,CAAC,KAAK,EAAE,EAAE;gCAChB,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC;gCAC7E,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,0BAA0B,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;4BAC9E,CAAC,GACH,CACL,EACA,OAAO,IAAI,CACR,KAAC,qBAAqB,IAClB,KAAK,EAAC,SAAS,EACf,UAAU,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,KAAK,OAAO,CAAC,iBAAiB,EAC7D,QAAQ,EAAE,CAAC,KAAK,EAAE,EAAE;gCAChB,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC;gCAC7E,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,0BAA0B,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;4BAC9E,CAAC,GACH,CACL,EACA,OAAO,IAAI,CACR,KAAC,kBAAkB,IACf,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,UAAU,EAC9C,KAAK,EAAC,UAAU,EAChB,MAAM,EAAE,OAAO,EACf,YAAY,EAAC,SAAS,EACtB,QAAQ,EAAE,GAAG,EAAE;gCACX,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,0BAA0B,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;4BAC9E,CAAC,GACH,CACL,EACA,OAAO,IAAI,CACR,KAAC,kBAAkB,IACf,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,UAAU,EAC9C,KAAK,EAAC,UAAU,EAChB,MAAM,EAAE,OAAO,EACf,YAAY,EAAC,SAAS,EACtB,QAAQ,EAAE,GAAG,EAAE;gCACX,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,0BAA0B,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;4BAC9E,CAAC,GACH,CACL,EACA,OAAO,IAAI,CACR,KAAC,kBAAkB,IACf,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,UAAU,EAC9C,KAAK,EAAC,SAAS,EACf,MAAM,EAAE,OAAO,EACf,YAAY,EAAC,QAAQ,EACrB,QAAQ,EAAE,GAAG,EAAE;gCACX,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,0BAA0B,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;4BAC9E,CAAC,GACH,CACL,EACA,OAAO,IAAI,CACR,KAAC,kBAAkB,IACf,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,UAAU,EAC9C,KAAK,EAAC,SAAS,EACf,MAAM,EAAE,OAAO,EACf,YAAY,EAAC,QAAQ,EACrB,QAAQ,EAAE,GAAG,EAAE;gCACX,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,0BAA0B,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;4BAC9E,CAAC,GACH,CACL,EACA,OAAO,IAAI,CACR,KAAC,mBAAmB,IAChB,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,UAAU,EAC9C,KAAK,EAAC,YAAY,EAClB,MAAM,EAAE,OAAO,EACf,YAAY,EAAC,MAAM,EACnB,OAAO,EAAE,CAAC,EACV,OAAO,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EACpB,QAAQ,EAAE,IAAI,EACd,IAAI,EAAE,GAAG,EACT,QAAQ,EAAE,GAAG,EAAE;gCACX,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,0BAA0B,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;4BAC9E,CAAC,GACH,CACL,EACA,OAAO,IAAI,CACR,KAAC,mBAAmB,IAChB,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,UAAU,EAC9C,KAAK,EAAC,YAAY,EAClB,MAAM,EAAE,OAAO,EACf,YAAY,EAAC,MAAM,EACnB,OAAO,EAAE,CAAC,EACV,OAAO,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EACpB,QAAQ,EAAE,IAAI,EACd,IAAI,EAAE,GAAG,EACT,QAAQ,EAAE,GAAG,EAAE;gCACX,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,0BAA0B,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;4BAC9E,CAAC,GACH,CACL,EACA,OAAO,IAAI,CACR,KAAC,mBAAmB,IAChB,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,UAAU,EAC9C,KAAK,EAAC,YAAY,EAClB,MAAM,EAAE,OAAO,EACf,YAAY,EAAC,MAAM,EACnB,OAAO,EAAE,CAAC,EACV,OAAO,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EACpB,QAAQ,EAAE,IAAI,EACd,IAAI,EAAE,GAAG,EACT,QAAQ,EAAE,GAAG,EAAE;gCACX,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,0BAA0B,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;4BAC9E,CAAC,GACH,CACL,IACoB,EACzB,MAAC,sBAAsB,IAAC,KAAK,EAAC,QAAQ,aAClC,KAAC,qBAAqB,IAClB,KAAK,EAAC,sBAAsB,EAC5B,UAAU,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EACvC,QAAQ,EAAE,CAAC,KAAK,EAAE,EAAE;gCAChB,IAAI,CAAC,QAAQ,CAAC,EAAE,UAAU,EAAE,KAAK,EAAE,CAAC,CAAC;gCACrC,IAAI,CAAC,gBAAgB,CAAC,OAAO,GAAG,IAAI,CAAC;gCACrC,IAAI,CAAC,sBAAsB,EAAE,CAAC;4BAClC,CAAC,GACH,EACD,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,KAAC,cAAc,IAAC,KAAK,EAAC,QAAQ,EAAC,OAAO,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,MAAM,EAAC,8BAA8B,GAAG,EAC9I,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,CACvB,KAAC,sBAAsB,IACnB,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,UAAU,EAC9C,KAAK,EAAC,MAAM,EACZ,KAAK,EAAE,GAAG,EACV,QAAQ,EAAE,CAAC,MAAM,EAAE,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,GAC1D,CACL,EACA,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,GAAG,IAAI,CAC9B,KAAC,mBAAmB,IAAC,KAAK,EAAC,SAAS,EAAC,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,GAAG,GAAG,WAAW,GAAG,IAAI,CAAC,uBAAuB,EAAE,CAAC,GAAI,CACzI,EACA,OAAO,IAAI,KAAC,mBAAmB,IAAC,KAAK,EAAC,QAAQ,EAAC,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,aAAa,EAAE,GAAI,IAClE,EACzB,KAAC,2BAA2B,IAAC,YAAY,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAI,IACnG,CACT,CAAC;IACN,CAAC;CACJ","sourcesContent":["import * as React from \"react\";\r\nimport type { BaseTexture } from \"core/Materials/Textures/baseTexture\";\r\nimport { FileButtonLine } from \"shared-ui-components/lines/fileButtonLineComponent\";\r\nimport { Tools } from \"core/Misc/tools\";\r\nimport { LineContainerComponent } from \"shared-ui-components/lines/lineContainerComponent\";\r\nimport { CheckBoxLineComponent } from \"../../sharedComponents/checkBoxLineComponent\";\r\nimport { Texture } from \"core/Materials/Textures/texture\";\r\nimport type { ImageSourceBlock } from \"core/Materials/Node/Blocks/Dual/imageSourceBlock\";\r\nimport { GeneralPropertyTabComponent, GenericPropertyTabComponent } from \"./genericNodePropertyComponent\";\r\nimport type { NodeMaterialBlock } from \"core/Materials/Node/nodeMaterialBlock\";\r\nimport type { GlobalState } from \"../../globalState\";\r\nimport { TextInputLineComponent } from \"shared-ui-components/lines/textInputLineComponent\";\r\nimport type { IPropertyComponentProps } from \"shared-ui-components/nodeGraphSystem/interfaces/propertyComponentProps\";\r\nimport { ButtonLineComponent } from \"shared-ui-components/lines/buttonLineComponent\";\r\nimport { OptionsLine } from \"shared-ui-components/lines/optionsLineComponent\";\r\nimport { FloatLineComponent } from \"shared-ui-components/lines/floatLineComponent\";\r\nimport { SliderLineComponent } from \"shared-ui-components/lines/sliderLineComponent\";\r\n\r\nexport class ImageSourcePropertyTabComponent extends React.Component<IPropertyComponentProps, { isEmbedded: boolean }> {\r\n    get imageSourceBlock(): ImageSourceBlock {\r\n        return this.props.nodeData.data as ImageSourceBlock;\r\n    }\r\n\r\n    constructor(props: IPropertyComponentProps) {\r\n        super(props);\r\n\r\n        const texture = this.imageSourceBlock.texture as BaseTexture;\r\n\r\n        this.state = { isEmbedded: !texture || texture.name.substring(0, 4) === \"data\" };\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    override UNSAFE_componentWillUpdate(nextProps: IPropertyComponentProps, nextState: { isEmbedded: boolean; loadAsCubeTexture: boolean }) {\r\n        if (nextProps.nodeData.data !== this.props.nodeData.data) {\r\n            const texture = (nextProps.nodeData.data as ImageSourceBlock).texture as BaseTexture;\r\n\r\n            nextState.isEmbedded = !texture || texture.name.substring(0, 4) === \"data\";\r\n            nextState.loadAsCubeTexture = texture && texture.isCube;\r\n        }\r\n    }\r\n\r\n    private _generateRandomForCache() {\r\n        return \"xxxxxxxxxxxxxxxxxxxx\".replace(/[x]/g, () => {\r\n            const r = (Math.random() * 10) | 0;\r\n            return r.toString();\r\n        });\r\n    }\r\n\r\n    updateAfterTextureLoad() {\r\n        this.props.stateManager.onUpdateRequiredObservable.notifyObservers(this.props.nodeData.data as NodeMaterialBlock);\r\n        this.props.stateManager.onRebuildRequiredObservable.notifyObservers();\r\n        this.forceUpdate();\r\n    }\r\n\r\n    removeTexture() {\r\n        let texture = this.imageSourceBlock.texture as BaseTexture;\r\n\r\n        if (texture) {\r\n            texture.dispose();\r\n            (texture as any) = null;\r\n            this.imageSourceBlock.texture = null;\r\n        }\r\n\r\n        this.updateAfterTextureLoad();\r\n    }\r\n\r\n    _prepareTexture() {\r\n        let texture = this.imageSourceBlock.texture as BaseTexture;\r\n\r\n        if (texture) {\r\n            texture.dispose();\r\n            (texture as any) = null;\r\n        }\r\n\r\n        if (!texture) {\r\n            this.imageSourceBlock.texture = new Texture(null, (this.props.stateManager.data as GlobalState).nodeMaterial.getScene(), false, false);\r\n            texture = this.imageSourceBlock.texture;\r\n            texture.coordinatesMode = Texture.EQUIRECTANGULAR_MODE;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Replaces the texture of the node\r\n     * @param file the file of the texture to use\r\n     */\r\n    replaceTexture(file: File) {\r\n        this._prepareTexture();\r\n\r\n        const texture = this.imageSourceBlock.texture as BaseTexture;\r\n        Tools.ReadFile(\r\n            file,\r\n            (data) => {\r\n                const blob = new Blob([data], { type: \"octet/stream\" });\r\n\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onloadend = () => {\r\n                    const base64data = reader.result as string;\r\n\r\n                    let extension: string | undefined = undefined;\r\n                    if (file.name.toLowerCase().indexOf(\".dds\") > 0) {\r\n                        extension = \".dds\";\r\n                    } else if (file.name.toLowerCase().indexOf(\".env\") > 0) {\r\n                        extension = \".env\";\r\n                    }\r\n                    (texture as Texture).updateURL(base64data, extension, () => this.updateAfterTextureLoad());\r\n                };\r\n            },\r\n            undefined,\r\n            true\r\n        );\r\n    }\r\n\r\n    replaceTextureWithUrl(url: string) {\r\n        this._prepareTexture();\r\n\r\n        const texture = this.imageSourceBlock.texture as BaseTexture;\r\n        (texture as Texture).updateURL(url, null, () => this.updateAfterTextureLoad());\r\n    }\r\n\r\n    override render() {\r\n        let url = \"\";\r\n        const block = this.props.nodeData.data as NodeMaterialBlock;\r\n\r\n        const texture = this.imageSourceBlock.texture as BaseTexture;\r\n        if (texture && texture.name && texture.name.substring(0, 4) !== \"data\") {\r\n            url = texture.name;\r\n        }\r\n\r\n        url = url.replace(/\\?nocache=\\d+/, \"\");\r\n\r\n        const samplingMode = [\r\n            { label: \"Nearest\", value: Texture.NEAREST_NEAREST }, // 1\r\n            { label: \"Linear\", value: Texture.LINEAR_LINEAR }, // 2\r\n\r\n            { label: \"Linear & linear mip\", value: Texture.LINEAR_LINEAR_MIPLINEAR }, // 3\r\n            { label: \"Linear & nearest mip\", value: Texture.LINEAR_LINEAR_MIPNEAREST }, // 11\r\n\r\n            { label: \"Nearest & linear mip\", value: Texture.NEAREST_NEAREST_MIPLINEAR }, // 8\r\n            { label: \"Nearest & nearest mip\", value: Texture.NEAREST_NEAREST_MIPNEAREST }, // 4\r\n\r\n            { label: \"Nearest/Linear\", value: Texture.NEAREST_LINEAR }, // 7\r\n            { label: \"Nearest/Linear & linear mip\", value: Texture.NEAREST_LINEAR_MIPLINEAR }, // 6\r\n            { label: \"Nearest/Linear & nearest mip\", value: Texture.NEAREST_LINEAR_MIPNEAREST }, // 5\r\n\r\n            { label: \"Linear/Nearest\", value: Texture.LINEAR_NEAREST }, // 12\r\n            { label: \"Linear/Nearest & linear mip\", value: Texture.LINEAR_NEAREST_MIPLINEAR }, // 10\r\n            { label: \"Linear/Nearest & nearest mip\", value: Texture.LINEAR_NEAREST_MIPNEAREST }, // 9\r\n        ];\r\n\r\n        return (\r\n            <div>\r\n                <GeneralPropertyTabComponent stateManager={this.props.stateManager} nodeData={this.props.nodeData} />\r\n                <LineContainerComponent title=\"PROPERTIES\">\r\n                    {texture && texture.updateSamplingMode && (\r\n                        <OptionsLine\r\n                            label=\"Sampling\"\r\n                            options={samplingMode}\r\n                            target={texture}\r\n                            noDirectUpdate={true}\r\n                            propertyName=\"samplingMode\"\r\n                            onSelect={(value) => {\r\n                                texture.updateSamplingMode(value as number);\r\n                                this.props.stateManager.onUpdateRequiredObservable.notifyObservers(block);\r\n                            }}\r\n                        />\r\n                    )}\r\n                    {texture && (\r\n                        <CheckBoxLineComponent\r\n                            label=\"Clamp U\"\r\n                            isSelected={() => texture.wrapU === Texture.CLAMP_ADDRESSMODE}\r\n                            onSelect={(value) => {\r\n                                texture.wrapU = value ? Texture.CLAMP_ADDRESSMODE : Texture.WRAP_ADDRESSMODE;\r\n                                this.props.stateManager.onUpdateRequiredObservable.notifyObservers(block);\r\n                            }}\r\n                        />\r\n                    )}\r\n                    {texture && (\r\n                        <CheckBoxLineComponent\r\n                            label=\"Clamp V\"\r\n                            isSelected={() => texture.wrapV === Texture.CLAMP_ADDRESSMODE}\r\n                            onSelect={(value) => {\r\n                                texture.wrapV = value ? Texture.CLAMP_ADDRESSMODE : Texture.WRAP_ADDRESSMODE;\r\n                                this.props.stateManager.onUpdateRequiredObservable.notifyObservers(block);\r\n                            }}\r\n                        />\r\n                    )}\r\n                    {texture && (\r\n                        <FloatLineComponent\r\n                            lockObject={this.props.stateManager.lockObject}\r\n                            label=\"Offset U\"\r\n                            target={texture}\r\n                            propertyName=\"uOffset\"\r\n                            onChange={() => {\r\n                                this.props.stateManager.onUpdateRequiredObservable.notifyObservers(block);\r\n                            }}\r\n                        />\r\n                    )}\r\n                    {texture && (\r\n                        <FloatLineComponent\r\n                            lockObject={this.props.stateManager.lockObject}\r\n                            label=\"Offset V\"\r\n                            target={texture}\r\n                            propertyName=\"vOffset\"\r\n                            onChange={() => {\r\n                                this.props.stateManager.onUpdateRequiredObservable.notifyObservers(block);\r\n                            }}\r\n                        />\r\n                    )}\r\n                    {texture && (\r\n                        <FloatLineComponent\r\n                            lockObject={this.props.stateManager.lockObject}\r\n                            label=\"Scale U\"\r\n                            target={texture}\r\n                            propertyName=\"uScale\"\r\n                            onChange={() => {\r\n                                this.props.stateManager.onUpdateRequiredObservable.notifyObservers(block);\r\n                            }}\r\n                        />\r\n                    )}\r\n                    {texture && (\r\n                        <FloatLineComponent\r\n                            lockObject={this.props.stateManager.lockObject}\r\n                            label=\"Scale V\"\r\n                            target={texture}\r\n                            propertyName=\"vScale\"\r\n                            onChange={() => {\r\n                                this.props.stateManager.onUpdateRequiredObservable.notifyObservers(block);\r\n                            }}\r\n                        />\r\n                    )}\r\n                    {texture && (\r\n                        <SliderLineComponent\r\n                            lockObject={this.props.stateManager.lockObject}\r\n                            label=\"Rotation U\"\r\n                            target={texture}\r\n                            propertyName=\"uAng\"\r\n                            minimum={0}\r\n                            maximum={Math.PI * 2}\r\n                            useEuler={true}\r\n                            step={0.1}\r\n                            onChange={() => {\r\n                                this.props.stateManager.onUpdateRequiredObservable.notifyObservers(block);\r\n                            }}\r\n                        />\r\n                    )}\r\n                    {texture && (\r\n                        <SliderLineComponent\r\n                            lockObject={this.props.stateManager.lockObject}\r\n                            label=\"Rotation V\"\r\n                            target={texture}\r\n                            propertyName=\"vAng\"\r\n                            minimum={0}\r\n                            maximum={Math.PI * 2}\r\n                            useEuler={true}\r\n                            step={0.1}\r\n                            onChange={() => {\r\n                                this.props.stateManager.onUpdateRequiredObservable.notifyObservers(block);\r\n                            }}\r\n                        />\r\n                    )}\r\n                    {texture && (\r\n                        <SliderLineComponent\r\n                            lockObject={this.props.stateManager.lockObject}\r\n                            label=\"Rotation W\"\r\n                            target={texture}\r\n                            propertyName=\"wAng\"\r\n                            minimum={0}\r\n                            maximum={Math.PI * 2}\r\n                            useEuler={true}\r\n                            step={0.1}\r\n                            onChange={() => {\r\n                                this.props.stateManager.onUpdateRequiredObservable.notifyObservers(block);\r\n                            }}\r\n                        />\r\n                    )}\r\n                </LineContainerComponent>\r\n                <LineContainerComponent title=\"SOURCE\">\r\n                    <CheckBoxLineComponent\r\n                        label=\"Embed static texture\"\r\n                        isSelected={() => this.state.isEmbedded}\r\n                        onSelect={(value) => {\r\n                            this.setState({ isEmbedded: value });\r\n                            this.imageSourceBlock.texture = null;\r\n                            this.updateAfterTextureLoad();\r\n                        }}\r\n                    />\r\n                    {this.state.isEmbedded && <FileButtonLine label=\"Upload\" onClick={(file) => this.replaceTexture(file)} accept=\".jpg, .png, .tga, .dds, .env\" />}\r\n                    {!this.state.isEmbedded && (\r\n                        <TextInputLineComponent\r\n                            lockObject={this.props.stateManager.lockObject}\r\n                            label=\"Link\"\r\n                            value={url}\r\n                            onChange={(newUrl) => this.replaceTextureWithUrl(newUrl)}\r\n                        />\r\n                    )}\r\n                    {!this.state.isEmbedded && url && (\r\n                        <ButtonLineComponent label=\"Refresh\" onClick={() => this.replaceTextureWithUrl(url + \"?nocache=\" + this._generateRandomForCache())} />\r\n                    )}\r\n                    {texture && <ButtonLineComponent label=\"Remove\" onClick={() => this.removeTexture()} />}\r\n                </LineContainerComponent>\r\n                <GenericPropertyTabComponent stateManager={this.props.stateManager} nodeData={this.props.nodeData} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"]}